<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/>
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/>
  <link rel="manifest" href="/site.webmanifest"/><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Tuning the Material UI Dropzone component | PissedCapslock’s blog</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Tuning the Material UI Dropzone component" />
<meta name="author" content="Robin Stevens" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="When looking to add a file upload using drag-and-drop to a Material-UI based React website, Google points you to the material-ui-dropzone package. Thanks to the documentation with a lot of sample code it is very easy to get it up-and-running. After using and testing it for a few days, there are however some tweaks that I needed to make it behave almost exactly like I want it." />
<meta property="og:description" content="When looking to add a file upload using drag-and-drop to a Material-UI based React website, Google points you to the material-ui-dropzone package. Thanks to the documentation with a lot of sample code it is very easy to get it up-and-running. After using and testing it for a few days, there are however some tweaks that I needed to make it behave almost exactly like I want it." />
<link rel="canonical" href="https://www.robinstevens.eu/2020/11/27/tuning-material-ui-dropzone.html" />
<meta property="og:url" content="https://www.robinstevens.eu/2020/11/27/tuning-material-ui-dropzone.html" />
<meta property="og:site_name" content="PissedCapslock’s blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-11-27T21:16:57+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Tuning the Material UI Dropzone component" />
<script type="application/ld+json">
{"datePublished":"2020-11-27T21:16:57+00:00","description":"When looking to add a file upload using drag-and-drop to a Material-UI based React website, Google points you to the material-ui-dropzone package. Thanks to the documentation with a lot of sample code it is very easy to get it up-and-running. After using and testing it for a few days, there are however some tweaks that I needed to make it behave almost exactly like I want it.","url":"https://www.robinstevens.eu/2020/11/27/tuning-material-ui-dropzone.html","@type":"BlogPosting","dateModified":"2020-11-27T21:16:57+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.robinstevens.eu/2020/11/27/tuning-material-ui-dropzone.html"},"author":{"@type":"Person","name":"Robin Stevens"},"headline":"Tuning the Material UI Dropzone component","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href='/assets/main.css'/><link type="application/atom+xml" rel="alternate" href="https://www.robinstevens.eu/feed.xml" title="PissedCapslock's blog" /><meta name="google-site-verification" content="0oGCVSIBwiEz1Y6cIj8DK0KmXMt-YJg7XvU5DZ-29bk" />

  <!-- RoughViz for handdrawn charts-->
  <script src="https://unpkg.com/rough-viz@1.0.6"></script>
</head><body><header class="site-header" role="banner">

    <div class="wrapper">
      <a class="site-title" rel="author" href="/"><span class="site-title-emoji">&#x1f92c;</span><kbd>&#x21ea;</kbd></a>
      
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>
        <div class="trigger">
          <a class="page-link-icon" href="/about">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="24" height="24" viewBox="0 0 24 24">
              <path fill="currentColor" d="M13,8A4,4 0 0,1 9,12A4,4 0 0,1 5,8A4,4 0 0,1 9,4A4,4 0 0,1 13,8M17,18V20H1V18C1,15.79 4.58,14 9,14C13.42,14 17,15.79 17,18M20.5,14.5V16H19V14.5H20.5M18.5,9.5H17V9A3,3 0 0,1 20,6A3,3 0 0,1 23,9C23,9.97 22.5,10.88 21.71,11.41L21.41,11.6C20.84,12 20.5,12.61 20.5,13.3V13.5H19V13.3C19,12.11 19.6,11 20.59,10.35L20.88,10.16C21.27,9.9 21.5,9.47 21.5,9A1.5,1.5 0 0,0 20,7.5A1.5,1.5 0 0,0 18.5,9V9.5Z" />
            </svg>
          </a>
          <a class="page-link-icon" href="/tags-overview">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="24" height="24" viewBox="0 0 24 24">
              <path d="M21.4 11.6L12.4 2.6C12 2.2 11.5 2 11 2H4C2.9 2 2 2.9 2 4V11C2 11.5 2.2 12 2.6 12.4L11.6 21.4C12 21.8 12.5 22 13 22C13.5 22 14 21.8 14.4 21.4L21.4 14.4C21.8 14 22 13.5 22 13C22 12.5 21.8 12 21.4 11.6M13 20L4 11V4H11L20 13M6.5 5C7.3 5 8 5.7 8 6.5S7.3 8 6.5 8 5 7.3 5 6.5 5.7 5 6.5 5M10.1 8.9L11.5 7.5L17 13L15.6 14.4L10.1 8.9M7.6 11.4L9 10L13 14L11.6 15.4L7.6 11.4Z" />
            </svg>
          </a>
        </div>
      </nav>
    </div>
  </header><main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Tuning the Material UI Dropzone component</h1>
    
    <div class="post-tags">
      
      <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="24" height="24" viewBox="0 0 24 24">
            <path d="M21.4 11.6L12.4 2.6C12 2.2 11.5 2 11 2H4C2.9 2 2 2.9 2 4V11C2 11.5 2.2 12 2.6 12.4L11.6 21.4C12 21.8 12.5 22 13 22C13.5 22 14 21.8 14.4 21.4L21.4 14.4C21.8 14 22 13.5 22 13C22 12.5 21.8 12 21.4 11.6M13 20L4 11V4H11L20 13M6.5 5C7.3 5 8 5.7 8 6.5S7.3 8 6.5 8 5 7.3 5 6.5 5.7 5 6.5 5M10.1 8.9L11.5 7.5L17 13L15.6 14.4L10.1 8.9M7.6 11.4L9 10L13 14L11.6 15.4L7.6 11.4Z" />
          </svg>
          <a href="/tags/dropzone">
            dropzone
          </a><svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="24" height="24" viewBox="0 0 24 24">
            <path d="M21.4 11.6L12.4 2.6C12 2.2 11.5 2 11 2H4C2.9 2 2 2.9 2 4V11C2 11.5 2.2 12 2.6 12.4L11.6 21.4C12 21.8 12.5 22 13 22C13.5 22 14 21.8 14.4 21.4L21.4 14.4C21.8 14 22 13.5 22 13C22 12.5 21.8 12 21.4 11.6M13 20L4 11V4H11L20 13M6.5 5C7.3 5 8 5.7 8 6.5S7.3 8 6.5 8 5 7.3 5 6.5 5.7 5 6.5 5M10.1 8.9L11.5 7.5L17 13L15.6 14.4L10.1 8.9M7.6 11.4L9 10L13 14L11.6 15.4L7.6 11.4Z" />
          </svg>
          <a href="/tags/material-ui">
            material-ui
          </a><svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="24" height="24" viewBox="0 0 24 24">
            <path d="M21.4 11.6L12.4 2.6C12 2.2 11.5 2 11 2H4C2.9 2 2 2.9 2 4V11C2 11.5 2.2 12 2.6 12.4L11.6 21.4C12 21.8 12.5 22 13 22C13.5 22 14 21.8 14.4 21.4L21.4 14.4C21.8 14 22 13.5 22 13C22 12.5 21.8 12 21.4 11.6M13 20L4 11V4H11L20 13M6.5 5C7.3 5 8 5.7 8 6.5S7.3 8 6.5 8 5 7.3 5 6.5 5.7 5 6.5 5M10.1 8.9L11.5 7.5L17 13L15.6 14.4L10.1 8.9M7.6 11.4L9 10L13 14L11.6 15.4L7.6 11.4Z" />
          </svg>
          <a href="/tags/material-ui-dropzone">
            material-ui-dropzone
          </a><svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="24" height="24" viewBox="0 0 24 24">
            <path d="M21.4 11.6L12.4 2.6C12 2.2 11.5 2 11 2H4C2.9 2 2 2.9 2 4V11C2 11.5 2.2 12 2.6 12.4L11.6 21.4C12 21.8 12.5 22 13 22C13.5 22 14 21.8 14.4 21.4L21.4 14.4C21.8 14 22 13.5 22 13C22 12.5 21.8 12 21.4 11.6M13 20L4 11V4H11L20 13M6.5 5C7.3 5 8 5.7 8 6.5S7.3 8 6.5 8 5 7.3 5 6.5 5.7 5 6.5 5M10.1 8.9L11.5 7.5L17 13L15.6 14.4L10.1 8.9M7.6 11.4L9 10L13 14L11.6 15.4L7.6 11.4Z" />
          </svg>
          <a href="/tags/react">
            react
          </a>
    </div>
    
    <p class="post-meta">
      <time class="dt-published" datetime="2020-11-27T21:16:57+00:00" itemprop="datePublished">Nov 27, 2020
      </time></p>

  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>When looking to add a file upload using drag-and-drop to a Material-UI based React website, Google points you to the <a href="https://github.com/Yuvaleros/material-ui-dropzone">material-ui-dropzone</a> package. 
Thanks to the documentation with a lot of sample code it is very easy to get it up-and-running. 
After using and testing it for a few days, there are however some tweaks that I needed to make it behave almost exactly like I want it.</p>

<p>I’ll first why I wanted to change certain things. You’ll find the code for the custom component at the bottom of this post.</p>

<h2 id="removing-the-incorrect-drag-feedback">Removing the incorrect drag feedback</h2>

<p>The default behavior of the dropzone is to show visual feedback to the user when the file they’re about to drop doesn’t match the installed file filter on the dropzone (see the <code class="language-plaintext highlighter-rouge">acceptedFiles</code> property). Due to the <a href="https://github.com/react-dropzone/react-dropzone/tree/master/examples/accept#browser-limitations">limitations of drag-and-drop in the browser</a>, this feedback is not always correct.</p>

<p>For example when testing on my machine with a filter configured to accept files with <code class="language-plaintext highlighter-rouge">.geojson</code> extension and a matching MIME type, I got:</p>

<ul>
  <li>Safari indicated the file was valid, based on the extension. There was no MIME type info available.</li>
  <li>Firefox and Chrome both refused the file. Debugging showed that they neither had access to the file name (hence couldn’t check the extension) and couldn’t find the MIME type. You can use <a href="https://react-dropzone-mime-tester.netlify.app">this site</a> to test whether the MIME type of a file can be found by the dropzone.</li>
  <li>Other files for which the MIME type could be detected (e.g. a CSV file) worked flawlessly in all browsers.</li>
</ul>

<h2 id="improved-visual-disabled-state">Improved visual disabled state</h2>

<p>You can easily disable the dropzone, but the default styling gave no visual indication of this.
It always looks enabled.</p>

<p>As you can customize the styling, I used the disabled text color from the Material-UI theme and used that for both the SVG icon as well as the text.
Further, I also replace the upload icon with a forbidden icon when disabling the widget.</p>

<h2 id="replacing-the-alerts">Replacing the alerts</h2>

<p>The dropzone shows alerts when a file was successfully dropped or rejected.
While there is API to customize all the settings about those alerts, the widget uses its own <a href="https://material-ui.com/components/snackbars/"><code class="language-plaintext highlighter-rouge">Snackbar</code></a> component.
If your application already has a <code class="language-plaintext highlighter-rouge">Snackbar</code> for your own alerts, the alerts coming from the widget could overlap with your own alerts.</p>

<p>The good thing about the available API is that you can disable the showing of the alerts while still having access to them through a callback function. This allows you to show the alerts in your own <code class="language-plaintext highlighter-rouge">Snackbar</code> or through any other mechanism.</p>

<p>Here I opted to only show the failure alerts, and show them underneath the widget.
One of the reasons of doing this was to combine that “error zone” with feedback from Formik when using it in a form with validation.</p>

<h2 id="integrating-with-formik">Integrating with Formik</h2>

<p>In our application we use <a href="https://formik.org">Formik</a> in combination with <a href="https://stackworx.github.io/formik-material-ui/">Formik Material-UI</a> to create, validate and submit our forms.</p>

<p>One of the requirements for the dropzone was to integrate it with Formik which is only a matter of converting some Formik properties to dropzone properties and vice versa.</p>

<p>Seeing as the dropzone by default has no place to show error messages, I re-used the error zone where I show the error alerts for showing the validation errors.</p>

<h2 id="code">Code</h2>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span>
  <span class="nx">AlertType</span><span class="p">,</span>
  <span class="nx">DropzoneArea</span><span class="p">,</span>
  <span class="nx">DropzoneAreaProps</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">material-ui-dropzone</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
  <span class="nx">createMuiTheme</span><span class="p">,</span>
  <span class="nx">MuiThemeProvider</span><span class="p">,</span>
  <span class="nx">useTheme</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@material-ui/core/styles</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Alert</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@material-ui/lab/Alert</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Box</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@material-ui/core</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">FieldProps</span><span class="p">,</span> <span class="nx">getIn</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">formik</span><span class="dl">"</span><span class="p">;</span>

<span class="kr">interface</span> <span class="nx">DropzoneProps</span>
  <span class="kd">extends</span> <span class="nx">FieldProps</span><span class="p">,</span>
    <span class="nx">Omit</span><span class="o">&lt;</span><span class="nx">DropzoneAreaProps</span><span class="p">,</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">error</span><span class="dl">"</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="nx">disabled</span><span class="p">?:</span> <span class="nx">boolean</span><span class="p">;</span>
<span class="p">}</span>
<span class="cm">/**
 * Convert the Formik properties to dropzone properties
 */</span>
<span class="k">export</span> <span class="kd">function</span> <span class="nx">fieldToDropzoneArea</span><span class="p">({</span>
  <span class="nx">disabled</span><span class="p">,</span>
  <span class="na">field</span><span class="p">:</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="nx">fieldName</span><span class="p">,</span> <span class="na">onChange</span><span class="p">:</span> <span class="nx">fieldOnChange</span><span class="p">,</span> <span class="p">...</span><span class="nx">field</span> <span class="p">},</span>
  <span class="na">form</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">setFieldValue</span><span class="p">:</span> <span class="nx">formSetFieldValue</span><span class="p">,</span>
    <span class="na">setFieldTouched</span><span class="p">:</span> <span class="nx">formSetFieldTouched</span><span class="p">,</span>
    <span class="na">getFieldMeta</span><span class="p">:</span> <span class="nx">formGetFieldMeta</span><span class="p">,</span>
    <span class="p">...</span><span class="nx">form</span>
  <span class="p">},</span>
  <span class="nx">onChange</span><span class="p">,</span>
  <span class="p">...</span><span class="nx">props</span>
<span class="p">}:</span> <span class="nx">DropzoneProps</span><span class="p">):</span> <span class="nx">DropzoneAreaProps</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="na">onChange</span><span class="p">:</span> <span class="p">(</span><span class="na">loadedFiles</span><span class="p">:</span> <span class="nx">File</span><span class="p">[])</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">formSetFieldValue</span><span class="p">(</span><span class="nx">fieldName</span><span class="p">,</span> <span class="nx">loadedFiles</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="na">onDrop</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">formSetFieldTouched</span><span class="p">(</span><span class="nx">fieldName</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="na">onDropRejected</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">formSetFieldTouched</span><span class="p">(</span><span class="nx">fieldName</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="na">onDelete</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">formSetFieldTouched</span><span class="p">(</span><span class="nx">fieldName</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="na">initialFiles</span><span class="p">:</span> <span class="p">(</span><span class="nx">formGetFieldMeta</span><span class="p">(</span><span class="nx">fieldName</span><span class="p">).</span><span class="nx">initialValue</span> <span class="k">as</span> <span class="nx">File</span><span class="p">[])</span> <span class="o">??</span> <span class="p">[],</span>
    <span class="p">...</span><span class="nx">field</span><span class="p">,</span>
    <span class="p">...</span><span class="nx">props</span><span class="p">,</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">Dropzone</span><span class="p">:</span> <span class="nx">React</span><span class="p">.</span><span class="nx">FC</span><span class="o">&lt;</span><span class="nx">DropzoneProps</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">theme</span> <span class="o">=</span> <span class="nx">useTheme</span><span class="p">();</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">alert</span><span class="p">,</span> <span class="nx">setAlert</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="o">&lt;</span><span class="kr">string</span> <span class="o">|</span> <span class="kc">null</span><span class="o">&gt;</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="c1">// Use different styling for the enabled</span>
  <span class="c1">// and disabled version of the widget</span>
  <span class="kd">const</span> <span class="nx">enabledTheme</span> <span class="o">=</span> <span class="nx">createMuiTheme</span><span class="p">(</span>
    <span class="p">{</span>
      <span class="na">overrides</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">MuiDropzoneArea</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">icon</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">color</span><span class="p">:</span> <span class="nx">theme</span><span class="p">.</span><span class="nx">palette</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">primary</span><span class="p">,</span>
          <span class="p">},</span>
          <span class="na">text</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">color</span><span class="p">:</span> <span class="nx">theme</span><span class="p">.</span><span class="nx">palette</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">primary</span><span class="p">,</span>
          <span class="p">},</span>
        <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">},</span>
    <span class="nx">theme</span>
  <span class="p">);</span>
  <span class="kd">const</span> <span class="nx">disabledTheme</span> <span class="o">=</span> <span class="nx">createMuiTheme</span><span class="p">(</span>
    <span class="p">{</span>
      <span class="na">overrides</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">MuiDropzoneArea</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">icon</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">color</span><span class="p">:</span> <span class="nx">theme</span><span class="p">.</span><span class="nx">palette</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">disabled</span><span class="p">,</span>
          <span class="p">},</span>
          <span class="na">text</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">color</span><span class="p">:</span> <span class="nx">theme</span><span class="p">.</span><span class="nx">palette</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">disabled</span><span class="p">,</span>
          <span class="p">},</span>
        <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">},</span>
    <span class="nx">theme</span>
  <span class="p">);</span>

  <span class="kd">const</span> <span class="nx">fieldError</span> <span class="o">=</span> <span class="nx">getIn</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">errors</span><span class="p">,</span> <span class="nx">props</span><span class="p">.</span><span class="nx">field</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">showError</span> <span class="o">=</span> <span class="nx">getIn</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">touched</span><span class="p">,</span> <span class="nx">props</span><span class="p">.</span><span class="nx">field</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!!</span><span class="nx">fieldError</span><span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">MuiThemeProvider</span>
      <span class="na">theme</span><span class="p">=</span><span class="si">{</span>
        <span class="nx">props</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">props</span><span class="p">.</span><span class="nx">disabled</span> <span class="p">?</span> <span class="nx">disabledTheme</span> <span class="p">:</span> <span class="nx">enabledTheme</span>
      <span class="si">}</span>
    <span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">DropzoneArea</span>
        <span class="si">{</span><span class="p">...</span><span class="nx">fieldToDropzoneArea</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span><span class="si">}</span>
        <span class="na">disableRejectionFeedback</span>
        <span class="na">showAlerts</span><span class="p">=</span><span class="si">{</span><span class="kc">false</span><span class="si">}</span>
        <span class="na">onAlert</span><span class="p">=</span><span class="si">{</span><span class="p">(</span><span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">variant</span><span class="p">:</span> <span class="nx">AlertType</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">variant</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">error</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">setAlert</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">setAlert</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span><span class="si">}</span>
        <span class="na">dropzoneProps</span><span class="p">=</span><span class="si">{</span><span class="p">{</span>
          <span class="na">disabled</span><span class="p">:</span> <span class="nx">props</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">??</span> <span class="nx">props</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">isSubmitting</span><span class="p">,</span>
        <span class="p">}</span><span class="si">}</span>
      <span class="p">&gt;</span>
        <span class="si">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="si">}</span>
      <span class="p">&lt;/</span><span class="nc">DropzoneArea</span><span class="p">&gt;</span>
      <span class="si">{</span><span class="nx">showError</span> <span class="o">&amp;&amp;</span> <span class="nx">alert</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">mt</span><span class="p">=</span><span class="si">{</span><span class="mi">1</span><span class="si">}</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nc">Alert</span> <span class="na">severity</span><span class="p">=</span><span class="s">"error"</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">fieldError</span><span class="si">}</span><span class="p">&lt;/</span><span class="nc">Alert</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Box</span><span class="p">&gt;</span>
      <span class="p">)</span><span class="si">}</span>
      <span class="si">{</span><span class="nx">alert</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">Box</span> <span class="na">mt</span><span class="p">=</span><span class="si">{</span><span class="mi">1</span><span class="si">}</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nc">Alert</span> <span class="na">severity</span><span class="p">=</span><span class="s">"error"</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">alert</span><span class="si">}</span><span class="p">&lt;/</span><span class="nc">Alert</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Box</span><span class="p">&gt;</span>
      <span class="p">)</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nc">MuiThemeProvider</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>

<span class="nx">Dropzone</span><span class="p">.</span><span class="nx">displayName</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">FormikMaterialUIDropZone</span><span class="dl">"</span><span class="p">;</span>

</code></pre></div></div>
<p>which can be used in a Formik powered form as</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="nc">Field</span>
  <span class="na">component</span><span class="p">=</span><span class="si">{</span><span class="nx">Dropzone</span><span class="si">}</span>
  <span class="na">name</span><span class="p">=</span><span class="s">"jsonFiles"</span>
  <span class="na">filesLimit</span><span class="p">=</span><span class="si">{</span><span class="mi">1</span><span class="si">}</span>
  <span class="na">acceptedFiles</span><span class="p">=</span><span class="si">{</span><span class="p">[</span><span class="dl">"</span><span class="s2">.geojson</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">text/geojson</span><span class="dl">"</span><span class="p">]</span><span class="si">}</span>
  <span class="na">maxFileSize</span><span class="p">=</span><span class="si">{</span><span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">2</span><span class="si">}</span>
  <span class="na">showFileNames</span>
  <span class="na">Icon</span><span class="p">=</span><span class="si">{</span><span class="nx">disabled</span> <span class="p">?</span> <span class="nx">NotInterestedIcon</span> <span class="p">:</span> <span class="nx">CloudUploadIcon</span><span class="si">}</span>
  <span class="na">dropzoneText</span><span class="p">=</span><span class="si">{</span>
    <span class="nx">disabled</span>
      <span class="p">?</span> <span class="dl">"</span><span class="s2">File upload is currently disabled</span><span class="dl">"</span>
      <span class="p">:</span> <span class="dl">"</span><span class="s2">Drag and drop a GeoJSON file here or click to browse for a file.</span><span class="dl">"</span>
  <span class="si">}</span>
  <span class="na">disabled</span><span class="p">=</span><span class="si">{</span><span class="nx">disabled</span><span class="si">}</span>
<span class="p">/&gt;</span>
</code></pre></div></div>

  </div>

<style>
#share-buttons-panel{
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 100%;
}
#share-buttons {display: inline-block; vertical-align: middle; }
#share-buttons:after {content: ""; display: block; clear: both;}
#share-buttons > div, #share-buttons > a {
    position: relative;
    text-align: left; 
    height: 36px; 
    width: 32px; 
    float: left; 
    text-align: center;
}

#share-buttons > a > svg {height: 16px; fill: #d5d5d5; margin-top: 10px;}
#share-buttons > a:hover {cursor: pointer;}
#share-buttons > a.facebook:hover > svg {fill: #3B5998;}
#share-buttons > a.twitter:hover > svg {fill: #55ACEE;}
#share-buttons > a.linkedin:hover > svg {fill: #0077b5;}
#share-buttons > a.reddit:hover > svg {fill: #FF4500;}
#share-buttons > a.hackernews:hover > svg {fill: #F0652F;}
#share-buttons > a.mail:hover > svg {fill: #7D7D7D;}
#share-buttons > a.mail:hover > svg {fill: #7D7D7D;}
#share-buttons > a.facebook > svg {height: 18px; margin-top: 9px;}
#share-buttons > a.twitter > svg {height: 20px; margin-top: 8px;}
#share-buttons > a.linkedin > svg {height: 19px; margin-top: 7px;}
#share-buttons > a.reddit > svg {height: 19px; margin-top: 9px;}
#share-buttons > a.hackernews > svg {height: 19px; margin-top: 9px;}
#share-buttons > a.mail > svg {height: 14px; margin-top: 11px;}
</style>


<div id="share-buttons-panel">
<span style="color: silver;font-size: 0.75em;">Share:</span>
<div id="share-buttons">
    <a class="facebook" title="Share this on Facebook" href="https://www.facebook.com/sharer.php?u=https://www.robinstevens.eu/2020/11/27/tuning-material-ui-dropzone.html" target="_blank">
      <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
        <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759h-306v-759h-255v-296h255v-218q0-186 104-288.5t277-102.5q147 0 228 12z"/>
      </svg>
    </a>
    <a class="twitter" title="Share this on Twitter" href="https://twitter.com/intent/tweet?url=https://www.robinstevens.eu/2020/11/27/tuning-material-ui-dropzone.html&text=Tuning%20the%20Material%20UI%20Dropzone%20component" target="_blank">
      <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
        <path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/>
      </svg>
    </a>
    <a class="linkedin" title="Share this on Linkedin" href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.robinstevens.eu/2020/11/27/tuning-material-ui-dropzone.html" target="_blank">
      <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
        <path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"/>
      </svg>
    </a>
    <a class="reddit" title="Share this on Reddit" href="http://www.reddit.com/submit?url=https://www.robinstevens.eu/2020/11/27/tuning-material-ui-dropzone.html&title=Tuning%20the%20Material%20UI%20Dropzone%20component" target="_blank">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M14.5 15.41C14.58 15.5 14.58 15.69 14.5 15.8C13.77 16.5 12.41 16.56 12 16.56C11.61 16.56 10.25 16.5 9.54 15.8C9.44 15.69 9.44 15.5 9.54 15.41C9.65 15.31 9.82 15.31 9.92 15.41C10.38 15.87 11.33 16 12 16C12.69 16 13.66 15.87 14.1 15.41C14.21 15.31 14.38 15.31 14.5 15.41M10.75 13.04C10.75 12.47 10.28 12 9.71 12C9.14 12 8.67 12.47 8.67 13.04C8.67 13.61 9.14 14.09 9.71 14.08C10.28 14.08 10.75 13.61 10.75 13.04M14.29 12C13.72 12 13.25 12.5 13.25 13.05S13.72 14.09 14.29 14.09C14.86 14.09 15.33 13.61 15.33 13.05C15.33 12.5 14.86 12 14.29 12M22 12C22 17.5 17.5 22 12 22S2 17.5 2 12C2 6.5 6.5 2 12 2S22 6.5 22 12M18.67 12C18.67 11.19 18 10.54 17.22 10.54C16.82 10.54 16.46 10.7 16.2 10.95C15.2 10.23 13.83 9.77 12.3 9.71L12.97 6.58L15.14 7.05C15.16 7.6 15.62 8.04 16.18 8.04C16.75 8.04 17.22 7.57 17.22 7C17.22 6.43 16.75 5.96 16.18 5.96C15.77 5.96 15.41 6.2 15.25 6.55L12.82 6.03C12.75 6 12.68 6.03 12.63 6.07C12.57 6.11 12.54 6.17 12.53 6.24L11.79 9.72C10.24 9.77 8.84 10.23 7.82 10.96C7.56 10.71 7.2 10.56 6.81 10.56C6 10.56 5.35 11.21 5.35 12C5.35 12.61 5.71 13.11 6.21 13.34C6.19 13.5 6.18 13.62 6.18 13.78C6.18 16 8.79 17.85 12 17.85C15.23 17.85 17.85 16.03 17.85 13.78C17.85 13.64 17.84 13.5 17.81 13.34C18.31 13.11 18.67 12.6 18.67 12Z" />
      </svg>
    </a>
    <a class="hackernews" title="Share this on HackerNews" href="http://news.ycombinator.com/submitlink?u=https://www.robinstevens.eu/2020/11/27/tuning-material-ui-dropzone.html&t=Tuning%20the%20Material%20UI%20Dropzone%20component" target="_blank">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M2,2H22V22H2V2M11.25,17.5H12.75V13.06L16,7H14.5L12,11.66L9.5,7H8L11.25,13.06V17.5Z" />
      </svg>
    </a>
    <a class="mail" title="Share this through Email" href="mailto:?&body=https://www.robinstevens.eu/2020/11/27/tuning-material-ui-dropzone.html">
      <svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
        <path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"/>
      </svg>
    </a>
</div>
</div><a class="u-url" href="/2020/11/27/tuning-material-ui-dropzone.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="socials"><ul class="social-media-list"><li><a rel="me" href="mailto:blog@robinstevens.eu"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#email"></use></svg></a></li><li><a rel="me" href="https://github.com/PissedCapslock" title="PissedCapslock"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://stackoverflow.com/users/1076463" title="1076463"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#stackoverflow"></use></svg></a></li><li><a rel="me" href="https://www.linkedin.com/in/robin-stevens-2177904" title="robin-stevens-2177904"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg></a></li><li><a href="/feed.xml"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#rss"></use></svg></a></li></ul></div>
</footer></body>

</html>
